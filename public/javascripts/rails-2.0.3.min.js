jQuery(function(b){var k=b("meta[name=csrf-token]").attr("content"),f=b("meta[name=csrf-param]").attr("content");b.fn.extend({triggerAndReturn:function(a,c){var d=new b.Event(a);this.trigger(d,c);return!1!==d.result},callRemote:function(){var a=this,c=a.attr("method")||a.attr("data-method")||"GET",d=a.attr("action")||a.attr("href"),e=a.attr("data-type")||"script";a.attr("data-jsonp")&&(e="text");if(a.attr("stop-propagate"))a.attr("stop-propagate",null);else{if(void 0===d)throw"No URL specified for remote call (action or href must be present).";
if(a.triggerAndReturn("ajax:before")){for(var g=a.is("form")?a.serializeArray():[],l=!1,h=g.length-1;0<=h;h-=1)g[h].name===f&&(l=!0);l||g.push({name:f,value:k});b.ajax({url:d,data:g,dataType:e,type:c.toUpperCase(),beforeSend:function(b){a.trigger("ajax:loading",b)},success:function(b,c,d){a.attr("data-jsonp")&&eval(a.attr("data-jsonp")+"("+b+")");a.trigger("ajax:success",[b,c,d])},complete:function(b){a.trigger("ajax:complete",b)},error:function(b,c,d){a.trigger("ajax:failure",[b,c,d])}})}a.trigger("ajax:after")}}});
b(document).on("click","a[data-confirm],input[data-confirm]",function(a){a=b(this);if(a.triggerAndReturn("confirm")&&!confirm(a.attr("data-confirm")))return a.attr("stop-propagate",!0),!1});b(document).on("submit","form[data-remote]",function(a){b(this).callRemote();a.preventDefault()});b(document).on("click","a[data-remote],input[data-remote]",function(a){b(this).callRemote();a.preventDefault()});b(document).on("click","a[data-method]:not([data-remote])",function(a){var c=b(this),d=c.attr("href"),
c=c.attr("data-method"),d=b('<form method="post" action="'+d+'"></form>'),c='<input name="_method" value="'+c+'" type="hidden" />';null!=f&&null!=k&&(c+='<input name="'+f+'" value="'+k+'" type="hidden" />');d.hide().append(c).appendTo("body");a.preventDefault();d.submit()});var e=function(){b(this).find("input[data-disable-with]").each(function(){var a=b(this);a.data("enable-with",a.val()).attr("value",a.attr("data-disable-with")).attr("disabled","disabled")})};b(document).on("ajax:before","form[data-remote]:has(input[data-disable-with])",
e);b(document).on("submit","form:not([data-remote]):has(input[data-disable-with])",e);b(document).on("ajax:complete","form[data-remote]:has(input[data-disable-with])",function(){b(this).find("input[data-disable-with]").each(function(){var a=b(this);a.removeAttr("disabled").val(a.data("enable-with"))})})});